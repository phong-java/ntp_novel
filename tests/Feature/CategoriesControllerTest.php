<?php

namespace Tests\Feature;

use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Foundation\Testing\WithFaker;
use Tests\TestCase;
use App\Models\Categories;
use App\Models\User;
use App\Http\Controllers\CategoriesController;

class CategoriesControllerTest extends TestCase
{
    // protected $admin;
    // protected function setUp(): void
    // {
    //     parent::setUp();
    //     $this->admin = User::factory()->create([
    //         'email' => 'admin@example.com',
    //         'password' => bcrypt('password'), // make sure this matches your factory
    //     ]);
    // }
    // use RefreshDatabase; //
    /**
     * A basic feature test example.
     *
     * @return void
     */
    public function test_category_empty_table()
    {
        $response = $this->get('/');

        $response->assertStatus(200);
    }
    public function test_category_create()
    {
        
        $data = [
            'sCategories' => 'V4an4',
            'sDes' => 'm5eme',
            'iStatus' => '1',
        ];
        $category = Categories::create($data);
        // Assert
        $this->assertDatabaseHas('tblcategories', ['sCategories' => 'V4an4']);
        $this->assertEquals('mem5e', $category->sDes);

        // // Gửi yêu cầu POST để tạo người dùng mới
        // $response = $this->post('/them-the-loai', $data);
        // $response = $this->get('/danh-sach-the-loai');

        // // // Kiểm tra trạng thái phản hồi
        // $response->assertStatus(200);
        // // $response->assertRedirect('/');
        // $response->assertDontSee(_('No category found'));
        

        // // // Kiểm tra xem người dùng mới đã được tạo trong cơ sở dữ liệu
        // // $this->assertDatabaseHas('users', [
        // //     'email' => 'john@example.com',
        // // ]);


    }
    public function test_category_create_many()
    {
        
        // for($i = 1; $i <= 11; $i++){
        //     Categories::create([
        //         'sCategories' => 'Van hoc' . $i,
        //         'sDes' => rand(100,999),
        //         'iStatus' => '1',
        //         'id' => 40
        //     ]);
        // }
        $category = Categories::factory(11)->create();
            // dd($category);
        // // Gửi yêu cầu POST để tạo người dùng mới
        // $response = $this->post('/them-the-loai', $data);
        $response = $this->get('/danh-sach-the-loai');

        // // Kiểm tra trạng thái phản hồi
        $response->assertStatus(200);
        $response->assertDontSee(_('No category found'));
        

        // // // Kiểm tra xem người dùng mới đã được tạo trong cơ sở dữ liệu
        // // $this->assertDatabaseHas('users', [
        // //     'email' => 'john@example.com',
        // // ]);


    }
    public function test_category_update()
    {
        
        
        $category = [
            'sCategories' => 'Old12 Name1234',
            'sDes' => 'van hoc novel',
            'iStatus' => '1',
        ];
        $category = Categories::create($category);

        $updateData = [
            'tentheloai' => 'New Name11',
            'motatheloai' => 'New Description',
            'trangthai' => '0',
        ];
        // Act
        $response = $this->postJson(route('Categories.update', $category->id), $updateData);
        //  dd($response->getContent());
        // $response = $this->post(route('Categories.update', $category->id), $updateData);


        // Assert
        $response->assertStatus(200)
                 ->assertJson([
                    'message' => 'Sửa thể loại thành công',
                    'status' =>1
                 ]);
        // $response->assertStatus(200);
        // // Kiểm tra dữ liệu đã được cập nhật trong cơ sở dữ liệu
        $this->assertDatabaseHas('tblcategories', [
            'id' => $category->id,
            'sCategories' => 'New Name11',
            'iStatus' => '0'
        ]);

        // // Kiểm tra dữ liệu cũ không còn trong cơ sở dữ liệu
        $this->assertDatabaseMissing('tblcategories', [
            'id' => $category->id,
            'sCategories' => 'Old Name',
            'iStatus' => '1'
        ]);
        // // Kiểm tra trạng thái phản hồi
    
        

        // // // Kiểm tra xem người dùng mới đã được tạo trong cơ sở dữ liệu
        // // $this->assertDatabaseHas('users', [
        // //     'email' => 'john@example.com',
        // // ]);


    }
    public function test_category_table()
    { 
        $user = User::factory() ->create(['sRole' => 'admin']);
        $response = $this->actingAs($user)->get(route('Categories.index'));
        //  dd($response->getContent());
         $response->assertStatus(200);

        // $response->assertStatus(200)->assertViewIs('admincp.Categories.index')->assertViewHas('cats', $response);
    }
    public function test_category_detail()
    { 
        $response = $this->get(route('Categories.show', 100));
        //  dd($response->getContent());
        $response->assertStatus(200);
        // $response->assertStatus(200)->assertViewIs('admincp.Categories.edit')->assertViewHas('cat', $response);
    }

    public function test_unauthenticated_user_cannot_access_category()
    {
        $user = User::factory() ->create();
        $response = $this->actingAs($user)->get(route('User.admin',$user->id));

        $this->assertTrue($response);
        // $response->assertRedirect('/password/reset');
    }

    public function test_category_it_success_to_create()
    {
        // Arrange
        $categoryData = [
            'tentheloai' => 'Success category 2',
            'motatheloai' => 'success',
            'trangthai' => '1',
        ];

        // Act
        $response = $this->postJson(route('Categories.store'), $categoryData);

        // Assert
        $response->assertStatus(200)->assertJson([
            'message' => 'Thể loại mới thêm thành công',
            'status' =>1
        ]);
        // $response->assertJsonValidationErrors(['trangthai']);
        $this->assertDatabaseHas('tblcategories', [
            'sCategories' => 'Success category 2',
            'sDes' => 'success',
        ]);
    }
    public function test_category_it_fail_to_create_invalid_name()
    {
        // Arrange
        $categoryData = [
            'tentheloai' => 12345123456,
            'motatheloai' => 'success',
            'trangthai' => '1',
        ];

        // Act
        $response = $this->postJson(route('Categories.store'), $categoryData);

        // Assert
        // $response->assertStatus(200)->assertJson([
        //     'message' => 'Thể loại mới thêm thành công',
        //     'status' =>1
        // ]);
        $response->assertStatus(422);
        $response->assertJsonValidationErrors(['tentheloai']);
        $this->assertDatabaseHas('tblcategories', [
            'sCategories' => 12345123456,
            'sDes' => 'success',
        ]);
    }
    public function test_category_it_fail_to_create_invalid_name_500()
    {
        // Arrange
        $categoryData = [
            'tentheloai' => '124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890',
            'motatheloai' => 'success',
            'trangthai' => '1',
        ];

        // Act
        $response = $this->postJson(route('Categories.store'), $categoryData);

        // Assert
        // $response->assertStatus(200)->assertJson([
        //     'message' => 'Thể loại mới thêm thành công',
        //     'status' =>1
        // ]);
        $response->assertStatus(422);
        $response->assertJsonValidationErrors(['tentheloai']);
        $this->assertDatabaseHas('tblcategories', [
            'sCategories' => 12345123456,
            'sDes' => 'success',
        ]);
    }
    public function test_category_it_fail_to_create_invalid_name_already_exist()
    {
        // Arrange
        $categoryData = [
            'tentheloai' => 'Success category 2',
            'motatheloai' => 'success',
            'trangthai' => '1',
        ];

        // Act
        $response = $this->postJson(route('Categories.store'), $categoryData);

        // Assert
        // $response->assertStatus(200)->assertJson([
        //     'message' => 'Thể loại mới thêm thành công',
        //     'status' =>1
        // ]);
        $response->assertStatus(422);
        $response->assertJsonValidationErrors(['tentheloai']);
        $this->assertDatabaseHas('tblcategories', [
            'sCategories' => 'Success category 2',
            'sDes' => 'success',
        ]);
    }
    public function test_category_it_fail_to_create_null_des()
    {
        // Arrange
        $categoryData = [
            'tentheloai' => 'Success category 22',
            'motatheloai' => 12345,
            'trangthai' => '1',
        ];

        // Act
        $response = $this->postJson(route('Categories.store'), $categoryData);

        // Assert
        // $response->assertStatus(200)->assertJson([
        //     'message' => 'Thể loại mới thêm thành công',
        //     'status' =>1
        // ]);
        $response->assertStatus(422);
        $response->assertJsonValidationErrors(['motatheloai']);
        $this->assertDatabaseHas('tblcategories', [
            'tentheloai' => 'Success category 22',
            'motatheloai' => 12345,
            'trangthai' => '1',
        ]);
    }
    public function test_category_it_fail_to_create_5000_des()
    {
        // Arrange
        $categoryData = [
            'tentheloai' => 'Success category 22',
            'motatheloai' => '124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567890124567812456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456789012456781245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678901245678909012456789012456789012456789090124567890124567890124567890',
            'trangthai' => '1',
        ];

        // Act
        $response = $this->postJson(route('Categories.store'), $categoryData);

        // Assert
        // $response->assertStatus(200)->assertJson([
        //     'message' => 'Thể loại mới thêm thành công',
        //     'status' =>1
        // ]);
        $response->assertStatus(422);
        $response->assertJsonValidationErrors(['motatheloai']);
        $this->assertDatabaseHas('tblcategories', [
            'tentheloai' => 'Success category 22',
            'motatheloai' => 12345,
            'trangthai' => '1',
        ]);
    }

}
