function getUrlParameter(){var t=window.location.href,a=t.split("?")[1],e={};if(a)for(var n=a.split("&"),r=0;r<n.length;r++){var o=n[r].split("="),s=decodeURIComponent(o[0]),i=decodeURIComponent(o[1]||"");e[s]=i}return e}function setUrlParameter(t,a){var e=new URL(window.location.href);e.searchParams.set(t,a),window.history.pushState({path:e.toString()},"",e.toString())}$(document).ready(function(){$("button.phong").on("click",function(){alert("phongllll")});var t='<span class="ntp_alert_close bg-success"><button type="button" class="btn-close"></button></span>',a='<span class="ntp_alert_close bg-danger"><button type="button" class="btn-close"></button></span>',e='<div class="spinner-border spinner-border-sm me-2 text-light" role="status"><span class="visually-hidden">Loading...</span></div>';if($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".ntp_slick").slick({dots:!0,infinite:!1,speed:300,slidesToShow:6,slidesToScroll:6,infinite:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:2}}]}),$(".ntp_recommend").slick({centerMode:!0,centerPadding:"200px",slidesToShow:1,autoplay:!0,autoplaySpeed:3e3,responsive:[{breakpoint:768,settings:{centerMode:!0,centerPadding:"50px",slidesToShow:1}},{breakpoint:480,settings:{centerMode:!0,centerPadding:"0px",slidesToShow:1}}]}),$("body").on("click",".ntp_submit_comment",function(){var n=$("#ntp_rating_form")[0],r=new FormData(n),o=$("#ntp_rating_form"),s=$(this);$(s).append(e),$.ajax({method:"POST",url:$(o).attr("action"),contentType:!1,processData:!1,data:r,dataType:"json",success:function(e){if(1==e.status)$(o).find(".alert-danger").fadeOut(200),$(o).find(".alert-success").fadeIn(200).html(e.message+t),$(n)[0].reset(),$(".ntp_novel_rating .rating-start").removeClass("fa-solid").addClass("far"),$("body").trigger("ntp_novel_review");else if(0==e.status){$(o).find(".alert-success").fadeOut(200);var r=e.errors,i="";for(var d in r)i+=r[d]+"</br>";$(o).find(".alert-danger").fadeIn(200).html(i+a)}$(s).find(".spinner-border").remove(),$("body").trigger("ntp-alert-out")},error:function(){$(s).find(".spinner-border").remove()}})}),$("body").on("click",".ntp_comment_reply",function(){var t=$("#ntp_rating_reply_form");$(t).attr("action",$(this).attr("data-link"))}),$("body").on("click",".ntp_comment_update",function(){var t=$("#ntp_update_rating_reply_form"),a=$(this).parents(".comment_item").find("p.comment_content").text().trim();$(t).attr("action",$(this).attr("data-link")),$(t).find('textarea[name="ntp_comment_update"]').text(a)}),$("body").on("click",".ntp_comment_reply_submit",function(){var n=$("#ntp_rating_reply_form")[0],r=new FormData(n),o=$("#ntp_rating_reply_form"),s=$(this);$(s).append(e),$.ajax({method:"POST",url:$(o).attr("action"),contentType:!1,processData:!1,data:r,dataType:"json",success:function(e){if(1==e.status)$(o).find(".alert-danger").fadeOut(200),$(o).find(".alert-success").fadeIn(200).html(e.message+t),$(n)[0].reset(),$(".ntp_novel_rating .rating-start").removeClass("fa-solid").addClass("far"),$("body").trigger("ntp_novel_review"),$(s).parents(".modal").find(".btn-close").trigger("click");else if(0==e.status){$(o).find(".alert-success").fadeOut(200);var r=e.errors,i="";for(var d in r)i+=r[d]+"</br>";$(o).find(".alert-danger").fadeIn(200).html(i+a)}$(s).find(".spinner-border").remove(),$("body").trigger("ntp-alert-out")},error:function(){$(s).find(".spinner-border").remove()}})}),$("body").on("click",".ntp_update_comment_reply_submit",function(){var n=$("#ntp_update_rating_reply_form")[0],r=new FormData(n),o=$("#ntp_update_rating_reply_form"),s=$(this);$(s).append(e),$.ajax({method:"POST",url:$(o).attr("action"),contentType:!1,processData:!1,data:r,dataType:"json",success:function(e){if(1==e.status)$(o).find(".alert-danger").fadeOut(200),$(o).find(".alert-success").fadeIn(200).html(e.message+t),$(n)[0].reset(),$(".ntp_novel_rating .rating-start").removeClass("fa-solid").addClass("far"),$("body").trigger("ntp_novel_review"),$(s).parents(".modal").find(".btn-close").trigger("click");else if(0==e.status){$(o).find(".alert-success").fadeOut(200);var r=e.errors,i="";for(var d in r)i+=r[d]+"</br>";$(o).find(".alert-danger").fadeIn(200).html(i+a)}$(s).find(".spinner-border").remove(),$("body").trigger("ntp-alert-out")},error:function(){$(s).find(".spinner-border").remove()}})}),$("body").on("click",".ntp_novel_rating .rating-start",function(){var t=$(this).data("point"),a=$(".rating_start_input");$(".rating-start").each(function(){$(this).data("point")<=t?$(this).addClass("fa-solid").removeClass("far"):$(this).removeClass("fa-solid").addClass("far")}),$(a).val($(this).data("point"))}),$("body").on("click",".ntp_show_hide_comment,.ntp_delete_comment",function(){var e=$(this).attr("data-link"),n=$(this).attr("data-value"),r=$(this).attr("data-id-comment"),o={value:n,id_comment:r},s="Bạn có chắc muốn thay đổi trạng thái của bình luận này?";if($(this).hasClass("ntp_show_hide_comment"))var s=0==n?"Bạn có chắc muốn ẩn bình luận này?":"Bạn có chắc muốn hiển thị bình luận này?";else var s=0==n?"Bạn có chắc muốn khôi phục bình luận này?":"Bạn có chắc muốn gỡ bình luận này?";var i=confirm(s);i&&$.ajax({method:"POST",url:e,dataType:"json",contentType:"application/json",data:JSON.stringify(o),success:function(e){if(1==e.status)$(".alert-danger.ntp_alert_public").fadeOut(200),$(".alert-success.ntp_alert_public").fadeIn(200).html(e.message+t),$("body").trigger("ntp_novel_review");else if(0==e.status){$(".alert-success.ntp_alert_public").fadeOut(200);var n=e.errors,r="";for(var o in n)r+=n[o]+"</br>";$(".alert-danger.ntp_alert_public").fadeIn(200).html(r+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("ntp_novel_review",function(){var t=$("#ntp_novel_review");if($(t).length){var a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(a){$(t).replaceWith(a.html)},error:function(){}})}}),$("body").on("click",".ntp_btn_report",function(){var n=$("#ntp_form_user_report")[0],r=new FormData(n),o=$("#ntp_form_user_report"),s=$(this);$(s).append(e),$.ajax({method:"POST",url:$(o).attr("action"),contentType:!1,processData:!1,data:r,dataType:"json",success:function(e){if(1==e.status)$(o).find(".alert-danger").fadeOut(200),$(o).find(".alert-success").fadeIn(200).html(e.message+t),$(n)[0].reset();else if(0==e.status){$(o).find(".alert-success").fadeOut(200);var r=e.errors,i="";for(var d in r)i+=r[d]+"</br>";$(o).find(".alert-danger").fadeIn(200).html(i+a)}$(s).find(".spinner-border").remove(),$("body").trigger("ntp-alert-out")},error:function(){$(s).find(".spinner-border").remove()}})}),$("body").on("click",".ntp_report_detail_update",function(){var e=$("#ntp_form_user_report_update");if($(e).length){var n=$("#ntp_form_user_report_update")[0],r=new FormData(n);$.ajax({method:"POST",url:$(e).attr("action"),contentType:!1,processData:!1,data:r,dataType:"json",success:function(n){if(1==n.status)$(e).find(".alert-danger").fadeOut(200),$(e).find(".alert-success").fadeIn(200).html(n.message+t);else if(0==n.status){$(e).find(".alert-success").fadeOut(200);var r=n.errors,o="";for(var s in r)o+=r[s]+"</br>";$(e).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}}),$("body").on("click","#user_report_list-tab",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(t){var a=$("#user_report_list");$(a).find(".user_reports").html(t.html)},error:function(){}})}),$("body").on("click",".xu_ly_bao_cao_tab",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(a){var e=$(t.attr("data-bs-target"));$(e).html(a.html)},error:function(){}})}),$("body").on("click",".ntp_report_admin_detail_update",function(){var e=$("#ntp_form_admin_report_update");if($(e).length){var n=$("#ntp_form_admin_report_update")[0],r=new FormData(n);$.ajax({method:"POST",url:$(e).attr("action"),contentType:!1,processData:!1,data:r,dataType:"json",success:function(n){if(1==n.status)$(e).find(".alert-danger").fadeOut(200),$(e).find(".alert-success").fadeIn(200).html(n.message+t),$(".xu_ly_bao_cao_tab.active").trigger("click");else if(0==n.status){$(e).find(".alert-success").fadeOut(200);var r=n.errors,o="";for(var s in r)o+=r[s]+"</br>";$(e).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}}),$("body").on("click",".ntp_btn_report_detail_user",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(t){var a=$(".ntp_report_detail");$(a).find(".modal-body").html(t.html),$(a).find(".modal-title").html(t.report_title),$(".xu_ly_bao_cao_tab").length<=0&&(0!=t.report_status?$(a).find(".modal-footer").hide():$(a).find(".modal-footer").show())},error:function(){}})}),$("body").on("click",".btn_get_thongke",function(){var n=$(this),r=$($(n).attr("data-form"))[0],o=new FormData(r),s=$($(n).attr("data-form"));$(n).append(e);var i=$(n).attr("target");$.ajax({method:"POST",url:$(s).attr("action"),contentType:!1,processData:!1,data:o,dataType:"json",success:function(e){if(1==e.status)$(s).find(".alert-danger").fadeOut(200),$(s).find(".alert-success").fadeIn(200).html(e.message+t),$(i).html(e.html);else if(0==e.status){$(s).find(".alert-success").fadeOut(200);var r=e.errors,o="";for(var d in r)o+=r[d]+"</br>";$(s).find(".alert-danger").fadeIn(200).html(o+a)}$(n).find(".spinner-border").remove(),$("body").trigger("ntp-alert-out")},error:function(){$(n).find(".spinner-border").remove()}})}),$("button.ntp_btn_cat_create").on("click",function(){var e=$(".ntp_cat_create")[0],n=new FormData(e),r=$(".ntp_cat_create");$.ajax({method:"POST",url:$(e).attr("action"),contentType:!1,processData:!1,data:n,dataType:"json",success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,o="";for(var s in n)o+=n[s]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("click",".ntp_cat_edit",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(t){var a=$(".ntp_edit_cat_ppoup");$(a).find(".modal-body").html(t)},error:function(){}})}),$("body").on("click",".ntp_edit_cat_ppoup .ntp_btn_update_cat",function(){var e=$(this),n=$(e).parents(".ntp_edit_cat_ppoup"),r=$(n).find(".modal-body form"),o=$(r).attr("action"),s=$(n).find(".modal-body form")[0],i=new FormData(s);$.ajax({method:"POST",url:o,data:i,contentType:!1,processData:!1,success:function(e){if($("body").trigger("ntp_admin_load_cat_list"),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,o="";for(var s in n)o+=n[s]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("#danh_sach_theloai-tab").on("click",function(){$("body").trigger("ntp_admin_load_cat_list")}),$("body").on("ntp_admin_load_cat_list",function(){var t=$("#danh_sach_theloai-tab");if($(t).length){var a=$(t).attr("data-link");$.ajax({method:"get",url:a,success:function(t){var a=$("#danh_sach_theloai");$(a).html(t)},error:function(){}})}}).trigger("ntp_admin_load_cat_list"),$("#ntp_login_form .ntp_submit_login").on("click",function(){var e=$(this),n=$(e).parents("#ntp_login_register_modal"),r=$(n).find("#ntp_login_form"),o=$(r).attr("action"),s=$(n).find("#ntp_login_form")[0],i=new FormData(s);$.ajax({method:"POST",url:o,data:i,Accept:"application/json",contentType:!1,processData:!1,dataType:"json",success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),setTimeout(function(){location.reload()},400);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,o="";for(var s in n)o+=n[s]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("#ntp_register_form .ntp_submit_register").on("click",function(){var e=$(this),n=$(e).parents("#ntp_login_register_modal"),r=$(n).find("#ntp_register_form"),o=$(r).attr("action"),s=$(n).find("#ntp_register_form")[0],i=new FormData(s);$.ajax({method:"POST",url:o,data:i,contentType:!1,processData:!1,dataType:"json",success:function(e){if(console.log(e),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),setTimeout(function(){location.reload()},2e3);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,o="";for(var s in n)o+=n[s]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$(".ntp_btn_update_infor_user").on("click",function(e){var n=$(this),r=$(n).parents("#ntp_form_update_infor_user"),o=$(n).parents("#ntp_form_update_infor_user")[0],s=new FormData(o),i=$(r).attr("action");$.ajax({method:"POST",url:i,data:s,contentType:!1,processData:!1,dataType:"json",success:function(e){if(console.log(e),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,o="";for(var s in n)o+=n[s]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}}),e.preventDefault()}),$("body").on("change","#ntp_input_update_anhdaidien",function(){var e=$(this)[0],n=e.files[0];if(n){var r=new FileReader;r.onload=function(t){$(".ntp_av_wrap .ntp_av ").attr("src",t.target.result)},r.readAsDataURL(n);var o=$(this),s=($(o).parents("#ntp_form_update_av_user"),$(o).parents("#ntp_form_update_av_user")[0]),i=new FormData(s),d=$(o).attr("data-link");$.ajax({method:"POST",url:d,data:i,contentType:!1,processData:!1,dataType:"json",success:function(e){if(1==e.status)if(1==e.av_update.avatar_change_status){$(".ntp_av_wrap").find(".alert-danger").fadeOut(200),$(".ntp_av_wrap").find(".alert-success").fadeIn(200).html(e.av_update.avatar_change+t);var n=$(".ntp_av");$(n).each(function(){$(this).attr("src",e.av_update.av_link)})}else 0==e.av_update.avatar_change_status&&($(".ntp_av_wrap").find(".alert-success").fadeOut(200),$(".ntp_av_wrap").find(".alert-danger").fadeIn(200).html(e.av_update.avatar_change+a));else{var r=e.errors,o="";for(var s in r)o+=r[s]+"</br>";console.log(e.errors),$(".ntp_av_wrap").find(".alert-success").fadeOut(200),$(".ntp_av_wrap").find(".alert-danger").fadeIn(200).html(o)}$("body").trigger("ntp-alert-out")},error:function(){}})}}),$("body").on("change","#ntp_input_anhbiatruyen",function(){var t=$(this)[0],a=t.files[0];if(a){var e=new FileReader;e.onload=function(t){$(".ntp_anh_bia_wrap .ntp_anh_bia ").attr("src",t.target.result)},e.readAsDataURL(a)}}),$(".ntp_btn_create_author").on("click",function(e){var n=$(this),r=$(n).parents("#ntp_form_create_author"),o=$(n).parents("#ntp_form_create_author")[0],s=new FormData(o),i=$(r).attr("action");$.ajax({method:"POST",url:i,data:s,contentType:!1,processData:!1,dataType:"json",success:function(e){if(console.log(e),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,o="";for(var s in n)o+=n[s]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}e.file&&$(r).find("#ntp_camket_da_upload").attr("src",e.file),$("body").trigger("ntp-alert-out")},error:function(){}}),e.preventDefault()}),$("body").on("click",".ntp_btn_author_detail",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"POST",url:a,success:function(t){var a=$("#ntp_author_detail");$(a).find(".modal-body").html(t)},error:function(){}})}),$("body").on("click",".ntp_author_detail_update",function(){var e=$(this),n=$(e).parents("#ntp_author_detail"),r=$(n).find(".modal-body form"),o=$(r).attr("data-link"),s=$(n).find(".modal-body form")[0],i=new FormData(s);$.ajax({method:"POST",url:o,data:i,contentType:!1,processData:!1,success:function(e){if($("body").trigger("ntp_admin_load_xetduyet_author_list"),$("body").trigger("ntp_admin_load_author_list"),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),setTimeout(function(){$(n).find(".btn-close").trigger("click")},1e3);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var o=e.errors,s="";for(var i in o)s+=o[i]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("click",".ntp_btn_update_chapter",function(){var e=$(this),n=$(e).parents("form#ntp_form_update_chapter"),r=$(n).attr("action"),o=$(e).parents("form#ntp_form_update_chapter")[0],s=new FormData(o);$.ajax({method:"POST",url:r,data:s,contentType:!1,processData:!1,success:function(e){if(1==e.status)$(n).find(".alert-danger").fadeOut(200),$(n).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(n).find(".alert-success").fadeOut(200);var r=e.errors,o="";for(var s in r)o+=r[s]+"</br>";$(n).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("click","#danh_sach_nguoi_dung-tab",function(){var t=$(this),a=$(t).attr("data-link"),e=$("#danh_sach_nguoi_dung");$.ajax({method:"Get",url:a,success:function(t){$(e).html(t)},error:function(){$(e).html('<div class="alert alert-danger" role="alert">Có lỗi xảy ra</div>')}})}),$("body").on("change",".admin_user_role_sl",function(){var a=$(this).val(),e=$(this).attr("data-link"),n={admin_user_role:a};$.ajax({url:e,type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(a){if(1==a.status)$(".alert-danger").fadeOut(200),$("#ntp_admin_user_list_wrap").find(".alert-success").fadeIn(200).html(a.message+t);else if(0==a.status){var e=a.errors,n="";for(var r in e)n+=e[r]+"</br>";$(".alert-success").fadeOut(200),$("#ntp_admin_user_list_wrap").find(".alert-danger").fadeIn(200).html(a.message+t)}},error:function(t,a,e){console.log("Error:",e)}}),setTimeout(function(){$(".alert-success").fadeOut(200),$(".alert-danger ").fadeOut(200)},2e3)}),$("body").on("change","input.admin_user_status, input.admin_user_comment",function(){var a=$(this).is(":checked")?1:0,e=$(this).attr("data-link"),n={admin_user_status:a};$(this).hasClass("admin_user_comment")&&(n={admin_user_comment:a}),$.ajax({url:e,type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(a){if(1==a.status)$(".alert-danger").fadeOut(200),$("#ntp_admin_user_list_wrap").find(".alert-success").fadeIn(200).html(a.message+t);else if(0==a.status){var e=a.errors,n="";for(var r in e)n+=e[r]+"</br>";$(".alert-success").fadeOut(200),$("#ntp_admin_user_list_wrap").find(".alert-danger").fadeIn(200).html(a.message+t)}},error:function(t,a,e){console.log("Error:",e)}}),setTimeout(function(){$(".alert-success").fadeOut(200),$(".alert-danger ").fadeOut(200)},2e3)}),$("body").on("click","#xet_duyet_tacgia-tab",function(){$("body").trigger("ntp_admin_load_xetduyet_author_list")}),$("body").on("ntp_admin_load_xetduyet_author_list",function(){var t=$("#xet_duyet_tacgia-tab"),a=$("#xet_duyet_tacgia");if($(t).length){var e=$(t).attr("data-link");$.ajax({method:"Get",url:e,success:function(t){$(a).html(t)},error:function(){$(a).html('<div class="alert alert-danger" role="alert">Có lỗi xảy ra</div>')}})}}).trigger("ntp_admin_load_xetduyet_author_list"),$("body").on("click",".ntp_chitiettruyen",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(t){var a=$("#ntp_edit_novel_poup ");$(a).find(".modal-body").html(t)},error:function(){}})}),$("body").on("click",".ntp_admin_btn_update_novel",function(){var e=$(this),n=$(e).parents("#ntp_edit_novel_poup"),r=$(n).find("#ntp_form_novel_License"),o=$(r).attr("action"),s=$(n).find(".modal-body form")[0],i=new FormData(s);$.ajax({method:"POST",url:o,data:i,contentType:!1,processData:!1,success:function(e){if($("body").trigger("ntp_admin_load_xetduyet_novel_list"),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),setTimeout(function(){$(n).find(".btn-close").trigger("click")},1e3);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var o=e.errors,s="";for(var i in o)s+=o[i]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}}),$("body").trigger("ntp_admin_load_novel_list")}),$("#xet_duyet_tacpham-tab").click(function(){$("body").trigger("ntp_admin_load_xetduyet_novel_list")}),$("body").on("ntp_admin_load_xetduyet_novel_list",function(){var t=$("#xet_duyet_tacpham-tab");if($(t).length){var a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(t){var a=$("#xet_duyet_tacpham");$(a).html(t)},error:function(){}})}}).trigger("ntp_admin_load_xetduyet_novel_list"),$(".ntp_btn_create_novel,.ntp_btn_update_infor_novel").click(function(e){var n=$(this),r=$(n).parents("#ntp_form_create_novel"),o=$(r).attr("action"),s=CKEDITOR.instances.motatruyen.getData(),i=$(n).parents("#ntp_form_create_novel")[0],d=new FormData(i);d.set("motatruyen",s),$.ajax({method:"POST",url:o,data:d,contentType:!1,processData:!1,success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),$("body").trigger("ntp_author_load_novel_list");else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,o="";for(var s in n)o+=n[s]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}}),e.preventDefault()}),$(".ntp_btn_create_chapter").click(function(e){var n=$(this),r=$(n).parents("#ntp_form_create_chapter"),o=$(r).attr("action"),s=CKEDITOR.instances.noidungchuong.getData(),i=$(n).parents("#ntp_form_create_chapter")[0],d=new FormData(i);d.set("noidungchuong",s),$.ajax({method:"POST",url:o,data:d,contentType:!1,processData:!1,success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,o="";for(var s in n)o+=n[s]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}}),e.preventDefault()}),$("#danhsach_truyen-tab").on("click",function(){$("body").trigger("ntp_author_load_novel_list")}),$("body").on("ntp_author_load_novel_list",function(){var t=$("#danhsach_truyen-tab");if($(t).length){var a=$(t).attr("data-link");$.ajax({method:"POST",url:a,success:function(t){var a=$("#ntp_novel_list_wrap");$(a).html(t)},error:function(){}})}}).trigger("ntp_author_load_novel_list"),$("body").on("click",".admin_kiemduyet_chuong",function(){var t=$(this),a=$(t).attr("data-link"),e=$("#ntp_chapter_detail_admin");$(e).find(".ntp_load").html("Loading..."),$.ajax({method:"GET",url:a,success:function(t){var a=t.chapters;for(var n in a)switch(n){case"id":$(e).find("."+n).val(a[n]);break;case"iPublishingStatus":1==a[n]?$(e).find("#xuly_chapter").prop("checked",!0):$(e).find("#xuly_chapter").prop("checked",!1);break;case"iPublishingStatus":1==a[n]?$(e).find("#xuly_chapter").prop("checked",!0):$(e).find("#xuly_chapter").prop("checked",!1);break;case"iStatus":1==a[n]?$(e).find("#trangthai_chapter").prop("checked",!0):$(e).find("#trangthai_chapter").prop("checked",!1);break;case"icharges":1==a[n]?e.find("."+n).html("Có tính phí"):e.find("."+n).html("Không tính phí");break;default:$(e).find("."+n).html(a[n])}},error:function(){}})}),$("body").on("click",".ntp_chapter_page .ntp_pay_chapter",function(){var e=$(this),n=$(".ntp_chapter_page .ntp_content"),r=$(e).attr("data-link");$.ajax({method:"Get",url:r,success:function(r){if(1==r.status)$(e).parents(".card").find(".alert-danger.ntp_alert_content").fadeOut(200),$(e).parents(".card").find(".alert-success.ntp_alert_content").fadeIn(200).html(r.message+t),$(n).html(r.content);else if(0==r.status){$(e).parents(".card").find(".alert-success.ntp_alert_content").fadeOut(200);var o=r.errors,s="";for(var i in o)s+=o[i]+"</br>";$(e).parents(".card").find(".alert-danger.ntp_alert_content").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("click",".ntp_chapter_detail_admin_check",function(){var e=$(this),n=$(e).parents(".ntp_chapter_detail_admin"),r=$(n).find("#ntp_form_chapter_check"),o=$(r).attr("action"),s=$(r).find("#xuly_chapter").is(":checked")?1:0,i=$(r).find("#trangthai_chapter").is(":checked")?1:0,d=$(n).find("#idChapter").val(),l=$(e).attr("data-id-novel"),c={xuly:s,trangthai:i,id:d,id_novel:l,_token:$(r).find('input[name="_token"]').val()};$.ajax({method:"POST",url:o,data:JSON.stringify(c),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),$("body").trigger("ntp_author_load_novel_list"),$("#ntp_mucluc").html(e.table),setTimeout(function(){$(n).find(".btn-close").trigger("click")},1e3);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var o=e.errors,s="";for(var i in o)s+=o[i]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("ntp_bookmark_load_locall",function(){if($(".ntp_bookmarks").hasClass("ntp_bookmarks_locall")&&$(".ntp_bookmarks").length){var t=localStorage.getItem("ntp_bookmarks");if(t)if(t=JSON.parse(t),0!==t.length){var a="";$.each(t,function(t,e){a+='<div class="d-flex flex-row my-1 align-items-center justify-content-between"><a href="'+e.link+'" class="title text-truncate text-decoration-none text-reset">'+e.title+'</a><a href="javascript:void(0);" data-id-novel="'+e.id+'" class="btn ntp_bookmark_remove ntp_locall btn-danger mx-2">X</a></div><hr>'}),$(".ntp_bookmarks").html(a)}else $(".ntp_bookmarks").html("")}}).trigger("ntp_bookmark_load_locall"),$("body").on("ntp_history_load_locall",function(){if($(".ntp_read_history").length&&$(".ntp_read_history").hasClass("ntp_read_history_locall")){var t=$(".ntp_read_history"),a=localStorage.getItem("ntp_historys");if(a){var e="";a=JSON.parse(a),0!==a.length&&$.each(a,function(t,a){e+='<div class="d-flex flex-row my-1 align-items-center justify-content-between"><a href="'+a.link_novel+'" class="title text-truncate text-decoration-none text-reset">'+a.novel_name+"<br> "+a.chapter_name+' </a><div class="d-flex flex-row align-items-center"><a href="'+a.link+'" title="Đọc tiếp" class="btn btn-success mx-2">...</a><a href="javascript:void(0);"  data-id-novel="'+a.id_novel+'" title="Xóa lịch sử" class="btn ntp_remove_readding_history btn-danger me-2">X</a></div></div>'}),$(t).html(e)}}}).trigger("ntp_history_load_locall"),$("body").on("click",".ntp_bookmark_remove",function(t){var a=$(this);if($(a).hasClass("ntp_locall")){var e=localStorage.getItem("ntp_bookmarks");if(e){if(e=JSON.parse(e),0!==e.length){var n=null;$.each(e,function(t,e){e.id==parseInt($(a).attr("data-id-novel"))&&(n=t)}),e.splice(n,1)}localStorage.setItem("ntp_bookmarks",JSON.stringify(e)),$("body").trigger("ntp_bookmark_load_locall")}}else{var r=$(a).attr("data-link");$.ajax({method:"Get",url:r,success:function(t){$(a).parents(".ntp_bookmarks_card").replaceWith(t.bookmarks)},error:function(){}})}t.preventDefault()}),$("body").on("click",".ntp_remove_readding_history",function(t){var a=$(this);if($(a).parents(".ntp_read_history").hasClass("ntp_read_history_locall")){var e=$(this).attr("data-id-novel"),n=localStorage.getItem("ntp_historys"),r=null;n&&(n=JSON.parse(n),0!==n.length&&($.each(n,function(t,a){a.id_novel==e&&(r=t)}),null!=r&&(n.splice(r,1),localStorage.setItem("ntp_historys",JSON.stringify(n)),$("body").trigger("ntp_history_load_locall"))))}else{var o=$(a).attr("data-link");$.ajax({method:"get",url:o,success:function(t){$(a).parents(".ntp_read_history_card").replaceWith(t.history)},error:function(){}})}t.preventDefault()}),$("body").on("load_user_setting",function(){var t=$("#ntp_form_user_seting"),a="";if(a=$(t).hasClass("ntp_locall_store")?localStorage.getItem("ntp_settings"):$(t).attr("data-setting")){var e=JSON.parse(a);0!==e.length&&($("body").css("font-family",e.ntp_font),$(t).find("#ntp_font_set").val(e.ntp_font),1===e.ntp_mode?($("html").attr("data-bs-theme","dark"),$(t).find("#ntp_dark_mode").prop("checked",!0)):($("html").attr("data-bs-theme","light"),$(t).find("#ntp_dark_mode").prop("checked",!1)))}}).trigger("load_user_setting"),$("body").on("click",".ntp_user_seting_save",function(){var e=$(this),n=$(e).parents(".modal-content").find("#ntp_form_user_seting"),r=$(n).attr("action"),o=$(n).find("#ntp_font_set").val(),s=$(n).find("#ntp_dark_mode").is(":checked")?1:0,i={ntp_font:o,ntp_mode:s};console.log(i),$(n).hasClass("ntp_locall_store")?(localStorage.setItem("ntp_settings",JSON.stringify(i)),$("body").trigger("load_user_setting"),$(n).find(".alert-success").fadeIn(200).html("Cài đặt của bạn đã được lưu trên trình duyệt bạn nên đăng nhập để lưu trữ tốt hơn"+t)):$.ajax({method:"POST",url:r,data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(1==e.status)$(n).find(".alert-danger").fadeOut(200),$(n).find(".alert-success").fadeIn(200).html(e.message+t),$(n).attr("data-setting",JSON.stringify(i)),$("body").trigger("load_user_setting");else if(0==e.status){var r=e.errors,o="";for(var s in r)o+=r[s]+"</br>";$(n).find(".alert-danger").fadeIn(200).html(o+a)}},error:function(t){var e="";for(var r in t)e+=errors[r]+"</br>";$(n).find(".alert-danger").fadeIn(200).html(e+a)}}),setTimeout(function(){$(".alert-success").fadeOut(200),$(".alert-danger").fadeOut(200)},1e3)}),$("#ntp_login_register_modal").length){if($(".ntp_novel_single").length){var n=localStorage.getItem("ntp_bookmarks"),r=$(".ntp_novel_single").attr("data-novel-id");n&&(n=JSON.parse(n),0!==n.length&&$.each(n,function(t,a){a.id==r&&$(".ntp_novel_single .ntp_mark>p").removeClass("text-success").addClass("text-danger").html('<i class="fa-solid fa-bookmark me-2" aria-hidden="true"></i>Hủy đánh dấu')}))}if($(".ntp_chapter_page").length){var o=localStorage.getItem("ntp_historys"),s=$(".ntp_chapter_title").find(".ntp_novel_name").text(),i=$(".ntp_chapter_title").find(".ntp_chapter_name").text(),d=$(location).attr("href"),l=$(".ntp_chapter_title").attr("data-id-novel"),c=$(".ntp_chapter_title").attr("data-link-novel");o=o?JSON.parse(o):[];var u=!1;0!==o.length&&$.each(o,function(t,a){a.id_novel==l&&(u=!0,a.link=d,a.novel_name=s,a.chapter_name=i,a.link_novel=c)}),u||o.push({novel_name:s,chapter_name:i,id_novel:l,link:d,link_novel:c}),localStorage.setItem("ntp_historys",JSON.stringify(o))}}$("body").on("click",".ntp_mark",function(){var t=$(this),a=$(t).attr("data-novel-id"),e=$(t).attr("data-link"),n=$(t).attr("data-name"),r=$(t).attr("data-novel-link"),o=$(t).find(">p"),s={id_novel:a};$.ajax({method:"POST",url:e,data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){if($(o).html(t.message),$(".ntp_count_bookmark").html(t.bookmarks+" đánh dấu"),1==t.status)$(o).removeClass("text-danger").addClass("text-success");else if(0==t.status)$(o).removeClass("text-success").addClass("text-danger");else if(3==t.status){var e=localStorage.getItem("ntp_bookmarks");e=e?JSON.parse(e):[];var s=!1,i=null;0!==e.length&&$.each(e,function(t,e){e.id==a&&(s=!0,i=t)}),s?(e.splice(i,1),$(o).removeClass("text-danger").addClass("text-success").html('<i class="fa-solid fa-bookmark me-2" aria-hidden="true"></i>Đánh dấu')):(e.push({id:a,title:n,link:r}),$(o).removeClass("text-success").addClass("text-danger").html('<i class="fa-solid fa-bookmark me-2" aria-hidden="true"></i>Hủy đánh dấu')),localStorage.setItem("ntp_bookmarks",JSON.stringify(e))
}},error:function(){}})}),$("body").on("click",".ntp-show-hide-pass",function(){var t=$(this),a=$(t).parents(".ntp_pass_wrap"),e=$(a).find("input"),n=$(e).attr("type");"password"===n?($(e).attr("type","text"),$(this).addClass("text-danger").removeClass("text-success")):($(e).attr("type","password"),$(this).addClass("text-success").removeClass("text-danger"))}),$("body").on("click",'.dropdown-item[data-bs-toggle="pill"]:not(.ntp_view_child)',function(){if("pill"==$(this).attr("data-bs-toggle")){var t=$(this).attr("id"),a=$(this).attr("data-bs-target");setUrlParameter("view",t),$("html, body").animate({scrollTop:$(a).offset().top-100},200)}}),$("body").on("click",".ntp_alert_close .btn-close,.modal .btn-close",function(){$(".alert:not(.ntp_alert_static)").fadeOut(200)}),$("body").on("ntp-alert-out",function(){setTimeout(function(){$(".alert:not(.ntp_alert_static)").fadeOut(200)},4e3)}),$("body").on("input",".admin_search_tacgia",function(){var t=$(this).val(),a=$(".ntp_drop_down_search_author");if(t.length>=3){var e=$(this).attr("data-link")+"/"+t;$.ajax({method:"POST",url:e,success:function(t){$(a).find(".card-body").html(t.html)},error:function(){}})}else $(a).find(".card-body").html("")}),$("body").on("click",".ntp_item_tacgia",function(){$(".admin_search_tacgia").attr("data-iduser",$(this).attr("data-iduser")),$(".admin_search_tacgia").val($(this).text())})}),$(window).on("load",function(){queryParams=getUrlParameter($),setTimeout(function(){if(0!=Object.keys(queryParams).length&&"view"in queryParams&&""!=queryParams.view){var t=$("#"+queryParams.view).attr("data-bs-target");$("#"+queryParams.view).trigger("click"),$(t).length&&$("html, body").animate({scrollTop:$(t).offset().top-100},200)}},100),$("#user_report_list-tab").length&&$("#user_report_list-tab").trigger("click")});