$(document).ready(function(){$("button.phong").on("click",function(){alert("phongllll")});var t='<span class="ntp_alert_close bg-success"><button type="button" class="btn-close"></button></span>',a='<span class="ntp_alert_close bg-danger"><button type="button" class="btn-close"></button></span>';if($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".ntp_slick").slick({dots:!0,infinite:!1,speed:300,slidesToShow:6,slidesToScroll:6,infinite:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:2}}]}),$(".ntp_recommend").slick({centerMode:!0,centerPadding:"200px",slidesToShow:1,autoplay:!0,autoplaySpeed:3e3,responsive:[{breakpoint:768,settings:{centerMode:!0,centerPadding:"50px",slidesToShow:1}},{breakpoint:480,settings:{centerMode:!0,centerPadding:"0px",slidesToShow:1}}]}),$("button.ntp_btn_cat_create").on("click",function(){var e=$(".ntp_cat_create")[0],n=new FormData(e),r=$(".ntp_cat_create");$.ajax({method:"POST",url:$(e).attr("action"),contentType:!1,processData:!1,data:n,dataType:"json",success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("click",".ntp_cat_edit",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(t){var a=$(".ntp_edit_cat_ppoup");$(a).find(".modal-body").html(t)},error:function(){}})}),$("body").on("click",".ntp_edit_cat_ppoup .ntp_btn_update_cat",function(){var e=$(this),n=$(e).parents(".ntp_edit_cat_ppoup"),r=$(n).find(".modal-body form"),s=$(r).attr("action"),o=$(n).find(".modal-body form")[0],i=new FormData(o);$.ajax({method:"POST",url:s,data:i,contentType:!1,processData:!1,success:function(e){if($("body").trigger("ntp_admin_load_cat_list"),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("#danh_sach_theloai-tab").on("click",function(){$("body").trigger("ntp_admin_load_cat_list")}),$("body").on("ntp_admin_load_cat_list",function(){var t=$("#danh_sach_theloai-tab");if($(t).length){var a=$(t).attr("data-link");$.ajax({method:"get",url:a,success:function(t){var a=$("#danh_sach_theloai");$(a).html(t)},error:function(){}})}}).trigger("ntp_admin_load_cat_list"),$("#ntp_login_form .ntp_submit_login").on("click",function(){var e=$(this),n=$(e).parents("#ntp_login_register_modal"),r=$(n).find("#ntp_login_form"),s=$(r).attr("action"),o=$(n).find("#ntp_login_form")[0],i=new FormData(o);$.ajax({method:"POST",url:s,data:i,Accept:"application/json",contentType:!1,processData:!1,dataType:"json",success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),setTimeout(function(){location.reload()},400);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("#ntp_register_form .ntp_submit_register").on("click",function(){var e=$(this),n=$(e).parents("#ntp_login_register_modal"),r=$(n).find("#ntp_register_form"),s=$(r).attr("action"),o=$(n).find("#ntp_register_form")[0],i=new FormData(o);$.ajax({method:"POST",url:s,data:i,contentType:!1,processData:!1,dataType:"json",success:function(e){if(console.log(e),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),setTimeout(function(){location.reload()},2e3);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$(".ntp_btn_update_infor_user").on("click",function(e){var n=$(this),r=$(n).parents("#ntp_form_update_infor_user"),s=$(n).parents("#ntp_form_update_infor_user")[0],o=new FormData(s),i=$(r).attr("action");$.ajax({method:"POST",url:i,data:o,contentType:!1,processData:!1,dataType:"json",success:function(e){if(console.log(e),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}}),e.preventDefault()}),$("body").on("change","#ntp_input_update_anhdaidien",function(){var e=$(this)[0],n=e.files[0];if(n){var r=new FileReader;r.onload=function(t){$(".ntp_av_wrap .ntp_av ").attr("src",t.target.result)},r.readAsDataURL(n);var s=$(this),o=($(s).parents("#ntp_form_update_av_user"),$(s).parents("#ntp_form_update_av_user")[0]),i=new FormData(o),l=$(s).attr("data-link");$.ajax({method:"POST",url:l,data:i,contentType:!1,processData:!1,dataType:"json",success:function(e){if(1==e.status)if(1==e.av_update.avatar_change_status){$(".ntp_av_wrap").find(".alert-danger").fadeOut(200),$(".ntp_av_wrap").find(".alert-success").fadeIn(200).html(e.av_update.avatar_change+t);var n=$(".ntp_av");$(n).each(function(){$(this).attr("src",e.av_update.av_link)})}else 0==e.av_update.avatar_change_status&&($(".ntp_av_wrap").find(".alert-success").fadeOut(200),$(".ntp_av_wrap").find(".alert-danger").fadeIn(200).html(e.av_update.avatar_change+a));else{var r=e.errors,s="";for(var o in r)s+=r[o]+"</br>";console.log(e.errors),$(".ntp_av_wrap").find(".alert-success").fadeOut(200),$(".ntp_av_wrap").find(".alert-danger").fadeIn(200).html(s)}$("body").trigger("ntp-alert-out")},error:function(){}})}}),$("body").on("change","#ntp_input_anhbiatruyen",function(){var t=$(this)[0],a=t.files[0];if(a){var e=new FileReader;e.onload=function(t){$(".ntp_anh_bia_wrap .ntp_anh_bia ").attr("src",t.target.result)},e.readAsDataURL(a)}}),$(".ntp_btn_create_author").on("click",function(e){var n=$(this),r=$(n).parents("#ntp_form_create_author"),s=$(n).parents("#ntp_form_create_author")[0],o=new FormData(s),i=$(r).attr("action");console.log(s),$.ajax({method:"POST",url:i,data:o,contentType:!1,processData:!1,dataType:"json",success:function(e){if(console.log(e),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}e.file&&$(r).find("#ntp_camket_da_upload").attr("src",e.file),$("body").trigger("ntp-alert-out")},error:function(){}}),e.preventDefault()}),$("body").on("click",".ntp_btn_author_detail",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"POST",url:a,success:function(t){var a=$("#ntp_author_detail");$(a).find(".modal-body").html(t)},error:function(){}})}),$("body").on("click",".ntp_author_detail_update",function(){var e=$(this),n=$(e).parents("#ntp_author_detail"),r=$(n).find(".modal-body form"),s=$(r).attr("data-link"),o=$(n).find(".modal-body form")[0],i=new FormData(o);$.ajax({method:"POST",url:s,data:i,contentType:!1,processData:!1,success:function(e){if($("body").trigger("ntp_admin_load_xetduyet_author_list"),$("body").trigger("ntp_admin_load_author_list"),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),setTimeout(function(){$(n).find(".btn-close").trigger("click")},1e3);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var s=e.errors,o="";for(var i in s)o+=s[i]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("click",".ntp_btn_update_chapter",function(){var e=$(this),n=$(e).parents("form#ntp_form_update_chapter"),r=$(n).attr("action"),s=$(e).parents("form#ntp_form_update_chapter")[0],o=new FormData(s);$.ajax({method:"POST",url:r,data:o,contentType:!1,processData:!1,success:function(e){if(1==e.status)$(n).find(".alert-danger").fadeOut(200),$(n).find(".alert-success").fadeIn(200).html(e.message+t);else if(0==e.status){$(n).find(".alert-success").fadeOut(200);var r=e.errors,s="";for(var o in r)s+=r[o]+"</br>";$(n).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("click","#danh_sach_nguoi_dung-tab",function(){var t=$(this),a=$(t).attr("data-link"),e=$("#danh_sach_nguoi_dung");$.ajax({method:"Get",url:a,success:function(t){$(e).html(t)},error:function(){$(e).html('<div class="alert alert-danger" role="alert">Có lỗi xảy ra</div>')}})}),$("body").on("change",".admin_user_role_sl",function(){var a=$(this).val(),e=$(this).attr("data-link"),n={admin_user_role:a};$.ajax({url:e,type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(a){if(1==a.status)$(".alert-danger").fadeOut(200),$("#ntp_admin_user_list_wrap").find(".alert-success").fadeIn(200).html(a.message+t);else if(0==a.status){var e=a.errors,n="";for(var r in e)n+=e[r]+"</br>";$(".alert-success").fadeOut(200),$("#ntp_admin_user_list_wrap").find(".alert-danger").fadeIn(200).html(a.message+t)}},error:function(t,a,e){console.log("Error:",e)}}),setTimeout(function(){$(".alert-success").fadeOut(200),$(".alert-danger ").fadeOut(200)},2e3)}),$("body").on("change","input.admin_user_status, input.admin_user_comment",function(){var a=$(this).is(":checked")?1:0,e=$(this).attr("data-link"),n={admin_user_status:a};$(this).hasClass("admin_user_comment")&&(n={admin_user_comment:a}),$.ajax({url:e,type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(a){if(1==a.status)$(".alert-danger").fadeOut(200),$("#ntp_admin_user_list_wrap").find(".alert-success").fadeIn(200).html(a.message+t);else if(0==a.status){var e=a.errors,n="";for(var r in e)n+=e[r]+"</br>";$(".alert-success").fadeOut(200),$("#ntp_admin_user_list_wrap").find(".alert-danger").fadeIn(200).html(a.message+t)}},error:function(t,a,e){console.log("Error:",e)}}),setTimeout(function(){$(".alert-success").fadeOut(200),$(".alert-danger ").fadeOut(200)},2e3)}),$("body").on("click","#xet_duyet_tacgia-tab",function(){$("body").trigger("ntp_admin_load_xetduyet_author_list")}),$("body").on("ntp_admin_load_xetduyet_author_list",function(){var t=$("#xet_duyet_tacgia-tab"),a=$("#xet_duyet_tacgia");if($(t).length){var e=$(t).attr("data-link");$.ajax({method:"Get",url:e,success:function(t){$(a).html(t)},error:function(){$(a).html('<div class="alert alert-danger" role="alert">Có lỗi xảy ra</div>')}})}}).trigger("ntp_admin_load_xetduyet_author_list"),$("body").on("click",".ntp_chitiettruyen",function(){var t=$(this),a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(t){var a=$("#ntp_edit_novel_poup ");$(a).find(".modal-body").html(t)},error:function(){}})}),$("body").on("click",".ntp_admin_btn_update_novel",function(){var e=$(this),n=$(e).parents("#ntp_edit_novel_poup"),r=$(n).find("#ntp_form_novel_License"),s=$(r).attr("action"),o=$(n).find(".modal-body form")[0],i=new FormData(o);$.ajax({method:"POST",url:s,data:i,contentType:!1,processData:!1,success:function(e){if($("body").trigger("ntp_admin_load_xetduyet_novel_list"),1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),setTimeout(function(){$(n).find(".btn-close").trigger("click")},1e3);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var s=e.errors,o="";for(var i in s)o+=s[i]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(o+a)}$("body").trigger("ntp-alert-out")},error:function(){}}),$("body").trigger("ntp_admin_load_novel_list")}),$("#xet_duyet_tacpham-tab").click(function(){$("body").trigger("ntp_admin_load_xetduyet_novel_list")}),$("body").on("ntp_admin_load_xetduyet_novel_list",function(){var t=$("#xet_duyet_tacpham-tab");if($(t).length){var a=$(t).attr("data-link");$.ajax({method:"Get",url:a,success:function(t){var a=$("#xet_duyet_tacpham");$(a).html(t)},error:function(){}})}}).trigger("ntp_admin_load_xetduyet_novel_list"),$(".ntp_btn_create_novel,.ntp_btn_update_infor_novel").click(function(e){var n=$(this),r=$(n).parents("#ntp_form_create_novel"),s=$(r).attr("action"),o=CKEDITOR.instances.motatruyen.getData(),i=$(n).parents("#ntp_form_create_novel")[0],l=new FormData(i);l.set("motatruyen",o),$.ajax({method:"POST",url:s,data:l,contentType:!1,processData:!1,success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),$("body").trigger("ntp_author_load_novel_list");else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}}),e.preventDefault()}),$(".ntp_btn_create_chapter").click(function(e){var n=$(this),r=$(n).parents("#ntp_form_create_chapter"),s=$(r).attr("action"),o=CKEDITOR.instances.noidungchuong.getData(),i=$(n).parents("#ntp_form_create_chapter")[0],l=new FormData(i);l.set("noidungchuong",o),console.log(l),$.ajax({method:"POST",url:s,data:l,contentType:!1,processData:!1,success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),$("body").trigger("ntp_author_load_novel_list");else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}}),e.preventDefault()}),$("#danhsach_truyen-tab").on("click",function(){$("body").trigger("ntp_author_load_novel_list")}),$("body").on("ntp_author_load_novel_list",function(){var t=$("#danhsach_truyen-tab");if($(t).length){var a=$(t).attr("data-link");$.ajax({method:"POST",url:a,success:function(t){var a=$("#ntp_novel_list_wrap");$(a).html(t)},error:function(){}})}}).trigger("ntp_author_load_novel_list"),$("body").on("click",".admin_kiemduyet_chuong",function(){var t=$(this),a=$(t).attr("data-link"),e=$("#ntp_chapter_detail_admin");$(e).find(".ntp_load").html("Loading..."),$.ajax({method:"GET",url:a,success:function(t){var a=t.chapters;for(var n in a)switch(n){case"id":$(e).find("."+n).val(a[n]);break;case"iPublishingStatus":1==a[n]?$(e).find("#xuly_chapter").prop("checked",!0):$(e).find("#xuly_chapter").prop("checked",!1);break;case"iPublishingStatus":1==a[n]?$(e).find("#xuly_chapter").prop("checked",!0):$(e).find("#xuly_chapter").prop("checked",!1);break;case"iStatus":1==a[n]?$(e).find("#trangthai_chapter").prop("checked",!0):$(e).find("#trangthai_chapter").prop("checked",!1);break;case"icharges":1==a[n]?e.find("."+n).html("Có tính phí"):e.find("."+n).html("Không tính phí");break;default:$(e).find("."+n).html(a[n])}},error:function(){}})}),$("body").on("click",".ntp_chapter_detail_admin_check",function(){var e=$(this),n=$(e).parents(".ntp_chapter_detail_admin"),r=$(n).find("#ntp_form_chapter_check"),s=$(r).attr("action"),o=$(r).find("#xuly_chapter").is(":checked")?1:0,i=$(r).find("#trangthai_chapter").is(":checked")?1:0,l=$(n).find("#idChapter").val(),d=$(e).attr("data-id-novel"),c={xuly:o,trangthai:i,id:l,id_novel:d,_token:$(r).find('input[name="_token"]').val()};$.ajax({method:"POST",url:s,data:JSON.stringify(c),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(1==e.status)$(r).find(".alert-danger").fadeOut(200),$(r).find(".alert-success").fadeIn(200).html(e.message+t),$("body").trigger("ntp_author_load_novel_list"),$("#ntp_mucluc").html(e.table);else if(0==e.status){$(r).find(".alert-success").fadeOut(200);var n=e.errors,s="";for(var o in n)s+=n[o]+"</br>";$(r).find(".alert-danger").fadeIn(200).html(s+a)}$("body").trigger("ntp-alert-out")},error:function(){}})}),$("body").on("ntp_bookmark_load_locall",function(){if($(".ntp_bookmarks").hasClass("ntp_bookmarks_locall")&&$(".ntp_bookmarks").length){var t=localStorage.getItem("ntp_bookmarks");if(t)if(t=JSON.parse(t),0!==t.length){var a="";$.each(t,function(t,e){a+='<div class="d-flex flex-row my-1 align-items-center justify-content-between"><a href="'+e.link+'" class="title text-truncate text-decoration-none text-reset">'+e.title+'</a><a href="javascript:void(0);" data-id-novel="'+e.id+'" class="btn ntp_bookmark_remove ntp_locall btn-danger mx-2">X</a></div><hr>'}),$(".ntp_bookmarks").html(a)}else $(".ntp_bookmarks").html("")}}).trigger("ntp_bookmark_load_locall"),$("body").on("ntp_history_load_locall",function(){if($(".ntp_read_history").length&&$(".ntp_read_history").hasClass("ntp_read_history_locall")){var t=$(".ntp_read_history"),a=localStorage.getItem("ntp_historys");if(a){var e="";a=JSON.parse(a),0!==a.length&&$.each(a,function(t,a){e+='<div class="d-flex flex-row my-1 align-items-center justify-content-between"><a href="'+a.link_novel+'" class="title text-truncate text-decoration-none text-reset">'+a.novel_name+"<br> "+a.chapter_name+' </a><div class="d-flex flex-row align-items-center"><a href="'+a.link+'" title="Đọc tiếp" class="btn btn-success mx-2">...</a><a href="javascript:void(0);"  data-id-novel="'+a.id_novel+'" title="Xóa lịch sử" class="btn ntp_remove_readding_history btn-danger me-2">X</a></div></div>'}),$(t).html(e)}}}).trigger("ntp_history_load_locall"),$("body").on("click",".ntp_bookmark_remove",function(t){var a=$(this);if($(a).hasClass("ntp_locall")){var e=localStorage.getItem("ntp_bookmarks");if(e){if(e=JSON.parse(e),0!==e.length){var n=null;$.each(e,function(t,e){e.id==parseInt($(a).attr("data-id-novel"))&&(n=t)}),e.splice(n,1)}localStorage.setItem("ntp_bookmarks",JSON.stringify(e)),$("body").trigger("ntp_bookmark_load_locall")}}else{var r=$(a).attr("data-link");$.ajax({method:"Get",url:r,success:function(t){$(a).parents(".ntp_bookmarks_card").replaceWith(t.bookmarks)},error:function(){}})}t.preventDefault()}),$("body").on("click",".ntp_remove_readding_history",function(t){var a=$(this);if($(a).parents(".ntp_read_history").hasClass("ntp_read_history_locall")){var e=$(this).attr("data-id-novel"),n=localStorage.getItem("ntp_historys"),r=null;n&&(n=JSON.parse(n),0!==n.length&&($.each(n,function(t,a){a.id_novel==e&&(r=t)}),null!=r&&(n.splice(r,1),localStorage.setItem("ntp_historys",JSON.stringify(n)),$("body").trigger("ntp_history_load_locall"))))}else{var s=$(a).attr("data-link");$.ajax({method:"get",url:s,success:function(t){$(a).parents(".ntp_read_history_card").replaceWith(t.history)},error:function(){}})}t.preventDefault()}),$("body").on("load_user_setting",function(){var t=$("#ntp_form_user_seting"),a="";if(a=$(t).hasClass("ntp_locall_store")?localStorage.getItem("ntp_settings"):$(t).attr("data-setting")){var e=JSON.parse(a);0!==e.length&&($("body").css("font-family",e.ntp_font),$(t).find("#ntp_font_set").val(e.ntp_font),1===e.ntp_mode?($("html").attr("data-bs-theme","dark"),$(t).find("#ntp_dark_mode").prop("checked",!0)):($("html").attr("data-bs-theme","light"),$(t).find("#ntp_dark_mode").prop("checked",!1)))}}).trigger("load_user_setting"),$("body").on("click",".ntp_user_seting_save",function(){var e=$(this),n=$(e).parents(".modal-content").find("#ntp_form_user_seting"),r=$(n).attr("action"),s=$(n).find("#ntp_font_set").val(),o=$(n).find("#ntp_dark_mode").is(":checked")?1:0,i={ntp_font:s,ntp_mode:o};console.log(i),$(n).hasClass("ntp_locall_store")?(localStorage.setItem("ntp_settings",JSON.stringify(i)),$("body").trigger("load_user_setting"),$(n).find(".alert-success").fadeIn(200).html("Cài đặt của bạn đã được lưu trên trình duyệt bạn nên đăng nhập để lưu trữ tốt hơn"+t)):$.ajax({method:"POST",url:r,data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(1==e.status)$(n).find(".alert-danger").fadeOut(200),$(n).find(".alert-success").fadeIn(200).html(e.message+t),$(n).attr("data-setting",JSON.stringify(i)),$("body").trigger("load_user_setting");else if(0==e.status){var r=e.errors,s="";for(var o in r)s+=r[o]+"</br>";$(n).find(".alert-danger").fadeIn(200).html(s+a)}},error:function(t){var e="";for(var r in t)e+=errors[r]+"</br>";$(n).find(".alert-danger").fadeIn(200).html(e+a)}}),setTimeout(function(){$(".alert-success").fadeOut(200),$(".alert-danger").fadeOut(200)},1e3)}),$("#ntp_login_register_modal").length){if($(".ntp_novel_single").length){var e=localStorage.getItem("ntp_bookmarks"),n=$(".ntp_novel_single").attr("data-novel-id");e&&(e=JSON.parse(e),0!==e.length&&$.each(e,function(t,a){a.id==n&&$(".ntp_novel_single .ntp_mark>p").removeClass("text-success").addClass("text-danger").html('<i class="fa-solid fa-bookmark me-2" aria-hidden="true"></i>Hủy đánh dấu')}))}if($(".ntp_chapter_page").length){var r=localStorage.getItem("ntp_historys"),s=$(".ntp_chapter_title").find(".ntp_novel_name").text(),o=$(".ntp_chapter_title").find(".ntp_chapter_name").text(),i=$(location).attr("href"),l=$(".ntp_chapter_title").attr("data-id-novel"),d=$(".ntp_chapter_title").attr("data-link-novel");r=r?JSON.parse(r):[];var c=!1;0!==r.length&&$.each(r,function(t,a){a.id_novel==l&&(c=!0,a.link=i,a.novel_name=s,a.chapter_name=o,a.link_novel=d)}),c||r.push({novel_name:s,chapter_name:o,id_novel:l,link:i,link_novel:d}),localStorage.setItem("ntp_historys",JSON.stringify(r))}}$("body").on("click",".ntp_mark",function(){var t=$(this),a=$(t).attr("data-novel-id"),e=$(t).attr("data-link"),n=$(t).attr("data-name"),r=$(t).attr("data-novel-link"),s=$(t).find(">p"),o={id_novel:a};$.ajax({method:"POST",url:e,data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){if($(s).html(t.message),$(".ntp_count_bookmark").html(t.bookmarks+" đánh dấu"),1==t.status)$(s).removeClass("text-danger").addClass("text-success");else if(0==t.status)$(s).removeClass("text-success").addClass("text-danger");else if(3==t.status){var e=localStorage.getItem("ntp_bookmarks");e=e?JSON.parse(e):[];var o=!1,i=null;0!==e.length&&$.each(e,function(t,e){e.id==a&&(o=!0,i=t)}),o?(e.splice(i,1),$(s).removeClass("text-danger").addClass("text-success").html('<i class="fa-solid fa-bookmark me-2" aria-hidden="true"></i>Đánh dấu')):(e.push({id:a,title:n,link:r}),$(s).removeClass("text-success").addClass("text-danger").html('<i class="fa-solid fa-bookmark me-2" aria-hidden="true"></i>Hủy đánh dấu')),localStorage.setItem("ntp_bookmarks",JSON.stringify(e))}},error:function(){}})}),$("body").on("click",".ntp-show-hide-pass",function(){var t=$(this),a=$(t).parents(".ntp_pass_wrap"),e=$(a).find("input"),n=$(e).attr("type");"password"===n?($(e).attr("type","text"),$(this).addClass("text-danger").removeClass("text-success")):($(e).attr("type","password"),$(this).addClass("text-success").removeClass("text-danger"))}),$("body").on("click",".ntp_alert_close .btn-close,.modal .btn-close",function(){$(".alert-success").fadeOut(200),$(".alert-danger ").fadeOut(200)}),$("body").on("ntp-alert-out",function(){setTimeout(function(){$(".alert-success").fadeOut(200),$(".alert-danger ").fadeOut(200)},1e4)})});